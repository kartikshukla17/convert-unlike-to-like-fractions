<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convert Unlike to Like Fractions</title>
    
    <!-- Mandatory Arial font family -->
    <style>
        /* Mandatory CSS Variables - Exact hex values */
        :root {
            /* Correctness Colors */
            --color-correct-base: #219150;
            --color-correct-light: #58D98B;
            --color-correct-dark: #0d803d;

            /* Wrongness Colors */
            --color-wrong-base: #FF6F61;
            --color-wrong-light: #FF8F83;
            --color-wrong-dark: #D4574C;

            /* Buttons/Sliders - Gold */
            --color-gold-base: #F1C40F;
            --color-gold-light: #F5D54D;
            --color-gold-dark: #BFA70B;

            /* Objects & Highlights */
            --color-orange-base: #FF7F3F;
            --color-blue-base: #3498DB;
            --color-green-base: #27AE60;
            --color-pink-base: #FF4D6D;
            --color-purple-base: #9B59B6;
            --color-aqua-base: #1ABC9C;
            --color-rose-base: #E84393;
            --color-yellow-base: #FF9F1A;
            --color-sand-base: #D2B48C;
            --color-white-base: #FFFFFF;
        }

        /* Mandatory responsive design - no scrollbars */
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            font-family: Arial, sans-serif;
            background-color: #000000; /* Black background */
        }

        #root {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        /* Main layout - 3 section design */
        .app-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100%;
            background-color: #000000; /* Black background */
            gap: 9px; /* Increased bezel gap between top and bottom sections */
            padding: 9px; /* Increased bezel gap around entire screen */
            box-sizing: border-box;
        }

        /* Top section with sidebar and main content */
        .top-section {
            display: flex;
            flex: 1;
            height: 85%;
            gap: 9px; /* Increased bezel gap between left and right panes */
        }

        /* Left sidebar for step navigation */
        .step-sidebar {
            width: 30%;
            background-color: #8B4513; /* Brown background */
            border: 3px solid #FFD700; /* Frame-like golden border */
            border-radius: 12px; /* Rounded corners */
            box-shadow: 
                0 0 0 1px rgba(255, 215, 0, 0.3), /* Inner glow */
                0 4px 12px rgba(255, 215, 0, 0.2), /* Outer shadow */
                inset 0 1px 0 rgba(255, 255, 255, 0.1); /* Inner highlight */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Center buttons vertically */
            padding: 20px; /* Reduced padding to minimize negative space */
            box-sizing: border-box;
            position: relative;
            overflow: visible; /* Allow hand pointer to be visible above */
            z-index: 1; /* Lower z-index than hand pointer */
        }

        /* Step buttons with proportional sizing - 30% scale relative to container */
        .step-button {
            width: 30vw; /* 30% of viewport width for proportional scaling */
            height: calc(30vw * 0.551); /* Maintains aspect ratio (140/254 = 0.551) */
            max-width: 254px; /* Original max width */
            max-height: 140px; /* Original max height */
            min-width: 150px; /* Minimum usable width */
            min-height: 83px; /* Minimum height maintaining ratio */
            margin-bottom: 20px; /* Reduced margin to optimize spacing */
            border: none;
            border-radius: 20px;
            font-size: clamp(20px, 2.5vw, 40px); /* Responsive font size */
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding-right: 15%;
            box-sizing: border-box;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.2), /* Subtle shadow */
                inset 0 1px 0 rgba(255, 255, 255, 0.2); /* Inner highlight */
        }

        .step-button.step-1 {
            background-color: var(--color-blue-base); /* Step 1 - blue (current) */
            color: #000000; /* Black text */
            /* Mandatory button animations */
            animation: pulse 2s infinite;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 0 10px rgba(52, 152, 219, 0.5);
        }

        .step-button.step-2 {
            background-color: var(--color-sand-base); /* Locked - sand */
            color: #6c757d; /* Gray text */
            cursor: not-allowed;
        }

        .step-button.step-2.enabled {
            background-color: var(--color-green-base); /* Step 2 - green */
            color: #000000; /* Black text */
            cursor: pointer;
            animation: pulse 2s infinite;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 0 10px rgba(39, 174, 96, 0.5);
        }

        .step-button.step-3 {
            background-color: var(--color-sand-base); /* Locked - sand */
            color: #6c757d; /* Gray text */
            cursor: not-allowed;
        }

        .step-button.step-3.enabled {
            background-color: var(--color-orange-base); /* Step 3 - orange */
            color: #000000; /* Black text */
            cursor: pointer;
            animation: pulse 2s infinite;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 0 10px rgba(255, 127, 63, 0.5);
        }

        /* Hand pointer: anchored to step buttons with proportional sizing */
        .hand-pointer {
            position: absolute; /* Inside the button so it points to the label */
            right: 2%;
            top: 50%;
            transform: translateY(-50%);
            width: clamp(20px, 4vw, 40px); /* Responsive sizing */
            height: clamp(20px, 4vw, 40px); /* Maintains square aspect ratio */
            pointer-events: none;
            animation: nudge 1.5s infinite;
            z-index: 10;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
        }

        @keyframes nudge {
            0% { transform: translate(0, 0); }
            25% { transform: translate(5px, -5px); }
            50% { transform: translate(0, 0); }
            75% { transform: translate(-5px, 5px); }
            100% { transform: translate(0, 0); }
        }

        /* Mandatory button tap animation */
        .step-button:active {
            transform: scale(0.95);
        }

        /* Mandatory pulsating glow effect */
        @keyframes pulse {
            0% { box-shadow: 0 0 10px rgba(241, 196, 15, 0.5); }
            50% { box-shadow: 0 0 20px rgba(241, 196, 15, 0.8); }
            100% { box-shadow: 0 0 10px rgba(241, 196, 15, 0.5); }
        }

        /* Text in interactive elements - mandatory styling */
        .step-button span {
            pointer-events: none;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        /* Main content area - black background */
        .main-content {
            width: 70%;
            background-color: #000000; /* Black background */
            border: 3px solid #FFD700; /* Frame-like golden border */
            border-radius: 12px; /* Rounded corners */
            box-shadow: 
                0 0 0 1px rgba(255, 215, 0, 0.3), /* Inner glow */
                0 4px 12px rgba(255, 215, 0, 0.2), /* Outer shadow */
                inset 0 1px 0 rgba(255, 255, 255, 0.1); /* Inner highlight */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px; /* Increased padding for larger elements */
            box-sizing: border-box;
            position: relative;
        }

        /* Content wrapper - maintains same dimensions and constraints */
        .content-wrapper {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
            overflow: hidden; /* Prevent content overflow */
        }

        /* Fraction display with exact specifications */
        .fraction-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 100px;
        }

        .fraction {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .fraction-numerator {
            font-size: 108px;
            font-weight: bold;
            line-height: 1;
            margin-bottom: 8px;
        }

        .fraction-line {
            width: 180px;
            height: 12px;
            background-color: #FFFFFF; /* White fraction line */
            margin: 8px 0;
        }

        .fraction-denominator {
            font-size: 108px;
            font-weight: bold;
            line-height: 1;
            margin-top: 8px;
        }

        /* Color coding for fractions - exact colors from screenshot */
        .fraction-6 {
            color: #219150; /* Green for 2/6 */
        }

        .fraction-4 {
            color: #FF7F3F; /* Orange for 3/4 */
        }

        /* Comma separator */
        .fraction-comma {
            font-size: 108px;
            color: #FFFFFF;
            font-weight: bold;
        }

        /* Bottom instruction bar */
        .bottom-bar {
            height: 15%;
            background-color: rgba(44, 44, 44, 0.9); /* Glass effect with 90% opacity */
            border: 3px solid #FFD700; /* Frame-like golden border */
            border-radius: 12px; /* Rounded corners */
            box-shadow: 
                0 0 0 1px rgba(255, 215, 0, 0.3), /* Inner glow */
                0 4px 12px rgba(255, 215, 0, 0.2), /* Outer shadow */
                inset 0 1px 0 rgba(255, 255, 255, 0.1); /* Inner highlight */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
            backdrop-filter: blur(10px); /* Glass blur effect */
        }

        .instruction-text {
            font-size: clamp(30px, 4.5vw, 42px); /* Larger, more prominent text */
            color: #FFFFFF; /* White text */
            text-align: center;
            font-weight: 600; /* Semi-bold for better prominence */
            line-height: 1.3; /* Better line spacing */
            max-width: 90%; /* Allow text to fill the pane nicely */
        }

        /* Smooth transitions */
        .scene-transition {
            transition: all 0.3s ease-in-out;
        }

        /* Flying animation overlay */
        .animation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .animation-overlay.active {
            opacity: 1;
        }

        /* Flying fraction elements */
        .flying-fraction {
            position: fixed;
            z-index: 1001;
            pointer-events: none;
        }

        .flying-fraction .fraction {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .flying-fraction .fraction-numerator,
        .flying-fraction .fraction-denominator {
            font-size: 72px;
            font-weight: bold;
            line-height: 1;
            transition: font-size 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .flying-fraction .fraction-line {
            width: 120px;
            height: 8px;
            background-color: #FFFFFF;
            margin: 5px 0;
            transition: width 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94), height 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .flying-fraction .fraction-comma {
            font-size: 72px;
            color: #FFFFFF;
            font-weight: bold;
            transition: font-size 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* Animation keyframes */
        @keyframes flyAndScale {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(var(--end-x), var(--end-y)) scale(0.5);
                opacity: 0;
            }
        }

        .flying-fraction.animate {
            animation: flyAndScale 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        .flying-fraction.animate .fraction-numerator,
        .flying-fraction.animate .fraction-denominator {
            font-size: 36px;
        }

        .flying-fraction.animate .fraction-line {
            width: 60px;
            height: 4px;
        }

        .flying-fraction.animate .fraction-comma {
            font-size: 36px;
        }

        /* Responsive adjustments for different screen sizes */
        
        /* Large screens (2560px and above) - 4K optimization */
        @media (min-width: 2560px) {
            .step-button {
                height: 140px;
                font-size: 40px;
                margin-bottom: 20px;
            }
            
            .fraction-numerator,
            .fraction-denominator {
                font-size: 72px;
            }
            
            .fraction-comma {
                font-size: 48px;
            }
            
            .instruction-text {
                font-size: 40px;
            }
            
            .app-container {
                padding: 15px;
                gap: 15px;
            }
            
            .step-sidebar {
                padding: 20px;
            }
            
            .main-content {
                padding: 45px;
            }
        }
        
        /* Medium-large screens (1920px to 2559px) - Full HD optimization */
        @media (min-width: 1920px) and (max-width: 2559px) {
            .step-button {
                height: 140px;
                font-size: 40px;
                margin-bottom: 20px;
            }
            
            .fraction-numerator,
            .fraction-denominator {
                font-size: 60px;
            }
            
            .instruction-text {
                font-size: 33px;
            }
            
            .step-sidebar {
                padding: 20px;
            }
        }
        
        /* Standard desktop (1280px to 1919px) - HD optimization */
        @media (min-width: 1280px) and (max-width: 1919px) {
            .step-button {
                height: 140px;
                font-size: 40px;
                margin-bottom: 20px;
            }
            
            .fraction-numerator,
            .fraction-denominator {
                font-size: 54px;
            }
            
            .instruction-text {
                font-size: 30px;
            }
            
            .step-sidebar {
                padding: 20px;
            }
        }
        
        /* Small desktop/tablet (961px to 1279px) */
        @media (min-width: 961px) and (max-width: 1279px) {
            .step-button {
                height: 120px;
                font-size: 36px;
                margin-bottom: 18px;
            }
            
            .fraction-numerator,
            .fraction-denominator {
                font-size: 48px;
            }
            
            .instruction-text {
                font-size: 27px;
            }
            
            .app-container {
                padding: 8px;
                gap: 8px;
            }
            
            .step-sidebar {
                padding: 18px;
            }
        }
        
        /* Mobile and small screens (960px and below) */
        @media (max-width: 960px) {
            .app-container {
                padding: 4px; /* Reduced padding for smaller screens */
            }
            
            .top-section {
                /* Keep horizontal layout - sidebar stays on left */
                flex-direction: row;
                height: 85%;
                gap: 4px; /* Reduced gap for smaller screens */
            }
            
            .step-sidebar {
                width: 30%; /* Consistent 30% width on mobile */
                height: auto;
                flex-direction: column; /* Keep vertical button layout */
                justify-content: flex-start;
                padding: 10px;
                border-right: 3px solid #FFD700;
                border-bottom: none;
                border-radius: 12px; /* All corners rounded */
            }
            
            .step-button {
                width: calc(100% - 20px); /* Responsive width within 30% sidebar */
                height: calc((100vw - 20px) * 0.551 * 0.3); /* Proportional height maintaining aspect ratio */
                max-height: 100px; /* Mobile-optimized max height */
                min-height: 60px; /* Minimum usable height */
                margin: 8px 0; /* Vertical margin for stacked layout */
                font-size: clamp(18px, 4vw, 24px); /* Responsive font for mobile */
                padding-right: 10%; /* Adjusted padding for mobile */
            }
            
            .fraction-display {
                gap: 50px;
            }
            
            .fraction-numerator,
            .fraction-denominator,
            .fraction-comma {
                font-size: 72px;
            }
            
            .fraction-line {
                width: 120px;
                height: 9px;
            }
            
            /* Bottom bar overflow prevention */
            .bottom-bar {
                height: 15%;
                min-height: 60px; /* Ensure minimum height */
                padding: 8px 12px; /* Reduced padding */
                overflow: hidden; /* Prevent content overflow */
            }
            
            .instruction-text {
                font-size: clamp(16px, 3vw, 22px); /* Smaller responsive font */
                line-height: 1.2; /* Tighter line spacing */
                max-width: 100%; /* Full width utilization */
                word-wrap: break-word; /* Break long words */
                overflow-wrap: break-word; /* Modern word breaking */
                hyphens: auto; /* Enable hyphenation */
                text-overflow: ellipsis; /* Handle text overflow gracefully */
                display: -webkit-box;
                -webkit-line-clamp: 2; /* Limit to 2 lines */
                -webkit-box-orient: vertical;
                overflow: hidden;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Removed external CDN scripts to ensure full offline functionality -->
    
    <!-- Translation data embedded for offline functionality -->
    <script>
        // Translation data for Convert Unlike to Like Fractions applet
        const appData = {
            en: {
                "standard-ui": {
                    buttons: {
                        next: "Next",
                        back: "Back", 
                        continue: "Continue",
                        start: "Start"
                    },
                    labels: {
                        step: "Step"
                    },
                    navigation: {
                        step_1: "Step 1",
                        step_2: "Step 2",
                        step_3: "Step 3"
                    }
                },
                "content-ui": {
                    instructions: {
                        main_instruction: "Tap each step to learn how to convert unlike fractions to like fractions.",
                        find_lcm: "Find the LCM of two denominators.",
                        convert_first: "Find the equivalent fraction of the first fraction using the LCM as the denominator.",
                        convert_second: "Find the equivalent fraction of the second fraction using the LCM as the denominator."
                    },
                    math_content: {
                        lcm_calculation: "LCM of 6 and 4 = 2 × 3 × 2 = 12",
                        unlike_fractions: "Unlike Fractions",
                        like_fractions: "Like Fractions",
                        example_fractions: "2/6, 3/4"
                    },
                    feedback: {
                        step_complete: "Step completed!",
                        tap_to_continue: "Tap to continue",
                        step_locked: "Complete previous step first"
                    }
                }
            }
        };
    </script>

    <script>
        // File purpose: Offline, framework-free rendering of the home screen with step navigation

        // Audio feedback function
        const playInteractionSound = () => {
            try {
                const audio = new Audio('./assets/audio/click.mp3');
                audio.volume = 0.5; // Set volume to 50% to avoid being too loud
                audio.play().catch(error => {
                    console.log('Audio playback failed:', error);
                });
            } catch (error) {
                console.log('Audio initialization failed:', error);
            }
        };

        const translations = appData.en;

        const createFlyingAnimation = () => {
            // Create overlay
            const overlay = document.createElement('div');
            overlay.className = 'animation-overlay';
            document.body.appendChild(overlay);
            
            // Get original fraction elements
            const originalFractions = document.querySelector('.fraction-display');
            const fractionRect = originalFractions.getBoundingClientRect();
            
            // Clone and position flying fractions
            const flyingContainer = document.createElement('div');
            flyingContainer.innerHTML = originalFractions.outerHTML;
            flyingContainer.className = 'flying-fraction';
            flyingContainer.style.left = fractionRect.left + 'px';
            flyingContainer.style.top = fractionRect.top + 'px';
            
            document.body.appendChild(flyingContainer);
            
            // Calculate destination positions (step1.html positions)
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            
            // Calculate exact step1.html fraction-display position
            // Layout: 6px padding + sidebar (25vw, min 200px, max 300px) + 6px gap + main-content padding 20px
            const sidebarWidth = Math.min(Math.max(viewportWidth * 0.25, 200), 300);
            const destX = 6 + sidebarWidth + 6 + 20 + (viewportWidth - 6 - sidebarWidth - 6 - 40) / 2; // Center of main-content
            const destY = 6 + 20 + 30; // Top padding + main-content padding + fraction margin from top
            
            // Calculate movement distances
            const deltaX = destX - fractionRect.left;
            const deltaY = destY - fractionRect.top;
            
            // Set CSS custom properties for animation
            flyingContainer.style.setProperty('--end-x', deltaX + 'px');
            flyingContainer.style.setProperty('--end-y', deltaY + 'px');
            
            // Start animation
            setTimeout(() => {
                overlay.classList.add('active');
                flyingContainer.classList.add('animate');
            }, 50);
            
            // Navigate after animation completes
            setTimeout(() => {
                window.location.href = 'step1.html';
            }, 1400);
        };

        const handleStepClick = (stepNumber) => {
            // Only Step 1 is available from index (current step)
            if (stepNumber === 1) {
                playInteractionSound();
                createFlyingAnimation();
            }
            // Step 2 and 3 are locked - do nothing
        };

        const renderApp = () => {
            const root = document.getElementById('root');
            root.innerHTML = `
                <div class="app-container">
                    <div class="top-section">
                        <div class="step-sidebar">
                            <button class="step-button step-1" onclick="handleStepClick(1)">
                                <span>${translations['standard-ui'].navigation.step_1}</span>
                                <img src="./assets/images/hand-pointer.png" alt="Click here" class="hand-pointer" />
                            </button>
                            <button class="step-button step-2" onclick="handleStepClick(2)">
                                <span>${translations['standard-ui'].navigation.step_2}</span>
                            </button>
                            <button class="step-button step-3" onclick="handleStepClick(3)">
                                <span>${translations['standard-ui'].navigation.step_3}</span>
                            </button>
                        </div>

                        <div class="main-content">
                            <div class="content-wrapper">
                                <div class="fraction-display">
                                    <div class="fraction fraction-6">
                                        <span class="fraction-numerator">2</span>
                                        <span class="fraction-line"></span>
                                        <span class="fraction-denominator">6</span>
                                    </div>
                                    <span class="fraction-comma">,</span>
                                    <div class="fraction fraction-4">
                                        <span class="fraction-numerator">3</span>
                                        <span class="fraction-line"></span>
                                        <span class="fraction-denominator">4</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bottom-bar">
                        <div class="instruction-text">
                            ${translations['content-ui'].instructions.main_instruction}
                        </div>
                    </div>
                </div>
            `;
        };

        document.addEventListener('DOMContentLoaded', renderApp);
    </script>
</body>
</html>

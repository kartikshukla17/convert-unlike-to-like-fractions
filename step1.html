<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 1: Find LCM - Convert Unlike to Like Fractions</title>
    
    <!-- Mandatory Arial font family -->
    <style>
        /* Mandatory CSS Variables - Exact hex values */
        :root {
            /* Correctness Colors */
            --color-correct-base: #219150;
            --color-correct-light: #58D98B;
            --color-correct-dark: #0d803d;

            /* Wrongness Colors */
            --color-wrong-base: #FF6F61;
            --color-wrong-light: #FF8F83;
            --color-wrong-dark: #D4574C;

            /* Buttons/Sliders - Gold */
            --color-gold-base: #F1C40F;
            --color-gold-light: #F5D54D;
            --color-gold-dark: #BFA70B;

            /* Objects & Highlights */
            --color-orange-base: #FF7F3F;
            --color-blue-base: #3498DB;
            --color-green-base: #27AE60;
            --color-pink-base: #FF4D6D;
            --color-purple-base: #9B59B6;
            --color-aqua-base: #1ABC9C;
            --color-rose-base: #E84393;
            --color-yellow-base: #FF9F1A;
            --color-sand-base: #D2B48C;
            --color-white-base: #FFFFFF;
        }

        /* Mandatory responsive design - no scrollbars */
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            font-family: Arial, sans-serif;
            background-color: #000000; /* Black background */
        }

        #root {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        /* Main layout - 3 section design */
        .app-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100%;
            background-color: #000000; /* Black background */
            gap: 9px; /* Increased bezel gap between top and bottom sections */
            padding: 9px; /* Increased bezel gap around entire screen */
            box-sizing: border-box;
        }

        /* Top section with sidebar and main content */
        .top-section {
            display: flex;
            flex: 1;
            height: 85%;
            gap: 9px; /* Increased bezel gap between left and right panes */
        }

        /* Left sidebar for step navigation - 30% width */
        .step-sidebar {
            width: 30%;
            background-color: #8B4513; /* Brown background */
            border: 3px solid #FFD700; /* Frame-like golden border */
            border-radius: 12px; /* Rounded corners */
            box-shadow: 
                0 0 0 1px rgba(255, 215, 0, 0.3), /* Inner glow */
                0 4px 12px rgba(255, 215, 0, 0.2), /* Outer shadow */
                inset 0 1px 0 rgba(255, 255, 255, 0.1); /* Inner highlight */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Center buttons vertically */
            padding: 20px; /* Reduced padding to minimize negative space */
            box-sizing: border-box;
            position: relative;
            overflow: visible; /* Allow hand pointer to be visible above */
            z-index: 1; /* Lower z-index than hand pointer */
        }

        /* Step buttons with proportional sizing - 30% scale relative to container */
        .step-button {
            width: 30vw; /* 30% of viewport width for proportional scaling */
            height: calc(30vw * 0.551); /* Maintains aspect ratio (140/254 = 0.551) */
            max-width: 254px; /* Original max width */
            max-height: 140px; /* Original max height */
            min-width: 150px; /* Minimum usable width */
            min-height: 83px; /* Minimum height maintaining ratio */
            margin-bottom: 20px; /* Reduced margin to optimize spacing */
            border: none;
            border-radius: 20px;
            font-size: clamp(20px, 2.5vw, 40px); /* Responsive font size */
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding-right: 15%;
            box-sizing: border-box;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.2), /* Subtle shadow */
                inset 0 1px 0 rgba(255, 255, 255, 0.2); /* Inner highlight */
        }

        .step-button.step-1 {
            background-color: var(--color-blue-base); /* Step 1 - blue */
            color: #000000; /* Black text */
            /* Mandatory button animations */
            animation: pulse 2s infinite;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 0 10px rgba(52, 152, 219, 0.5);
        }

        .step-button.step-2 {
            background-color: var(--color-sand-base); /* Locked - sand */
            color: #6c757d; /* Gray text */
            cursor: not-allowed;
        }

        .step-button.step-2.enabled {
            background-color: var(--color-green-base); /* Step 2 - green */
            color: #000000; /* Black text */
            cursor: pointer;
            animation: pulse 2s infinite;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 0 10px rgba(39, 174, 96, 0.5);
        }

        .step-button.step-3 {
            background-color: var(--color-sand-base); /* Locked - sand */
            color: #6c757d; /* Gray text */
            cursor: not-allowed;
        }

        .step-button.step-3.enabled {
            background-color: var(--color-orange-base); /* Step 3 - orange */
            color: #000000; /* Black text */
            cursor: pointer;
            animation: pulse 2s infinite;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 0 10px rgba(255, 127, 63, 0.5);
        }

        /* Mandatory button tap animation */
        .step-button:active {
            transform: scale(0.95);
        }

        /* Hand pointer: anchored to step buttons with proportional sizing */
        .hand-pointer {
            position: absolute; /* Inside the button so it points to the label */
            right: 2%;
            top: 50%;
            transform: translateY(-50%);
            width: clamp(20px, 4vw, 40px); /* Responsive sizing */
            height: clamp(20px, 4vw, 40px); /* Maintains square aspect ratio */
            pointer-events: none;
            animation: nudge 1.5s infinite;
            z-index: 10;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
        }

        @keyframes nudge {
            0% { transform: translate(0, 0); }
            25% { transform: translate(5px, -5px); }
            50% { transform: translate(0, 0); }
            75% { transform: translate(-5px, 5px); }
            100% { transform: translate(0, 0); }
        }

        /* Mandatory pulsating glow effect */
        @keyframes pulse {
            0% { box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 0 10px rgba(241, 196, 15, 0.5); }
            50% { box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 0 20px rgba(241, 196, 15, 0.8); }
            100% { box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 0 10px rgba(241, 196, 15, 0.5); }
        }

        /* Text in interactive elements - mandatory styling */
        .step-button span {
            pointer-events: none;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        /* Main content area - 70% width */
        .main-content {
            width: 70%;
            height: 100%; /* Explicit height constraint */
            max-height: 540px; /* Maximum height for proper containment */
            background-color: #000000; /* Black background */
            border: 3px solid #FFD700; /* Frame-like golden border */
            border-radius: 12px; /* Rounded corners */
            box-shadow: 
                0 0 0 1px rgba(255, 215, 0, 0.3), /* Inner glow */
                0 4px 12px rgba(255, 215, 0, 0.2), /* Outer shadow */
                inset 0 1px 0 rgba(255, 255, 255, 0.1); /* Inner highlight */
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 10px; /* Further reduced padding for better containment */
            box-sizing: border-box;
            position: relative;
            cursor: pointer; /* Allow tapping anywhere */
            overflow: hidden; /* Prevent content overflow */
        }

        /* Content wrapper - maintains same dimensions and constraints */
        .content-wrapper {
            width: 100%;
            height: 100%;
            max-height: 520px; /* Slightly less than container to account for padding */
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            box-sizing: border-box;
            overflow: hidden; /* Prevent content overflow */
            position: relative;
        }

        /* Original fractions at top - smaller size */
        .fraction-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px; /* Reduced gap for better fit */
            margin-bottom: 20px; /* Reduced margin */
        }

        .fraction {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .fraction-numerator {
            font-size: 42px; /* Reduced from 54px for better containment */
            font-weight: bold;
            line-height: 1;
            margin-bottom: 3px; /* Reduced margin */
        }

        .fraction-line {
            width: 70px; /* Reduced from 90px */
            height: 5px; /* Reduced height */
            background-color: #FFFFFF; /* White fraction line */
            margin: 3px 0; /* Reduced margin */
        }

        .fraction-denominator {
            font-size: 42px; /* Reduced from 54px for better containment */
            font-weight: bold;
            line-height: 1;
            margin-top: 3px; /* Reduced margin */
        }

        /* Color coding for fractions - exact colors from screenshot */
        .fraction-6 {
            color: #219150; /* Green for 2/6 */
        }

        .fraction-4 {
            color: #FF7F3F; /* Orange for 3/4 */
        }

        /* Comma separator */
        .fraction-comma {
            font-size: 42px; /* Reduced to match fraction elements */
            color: #FFFFFF;
            font-weight: bold;
        }

        /* Instruction text */
        .instruction-text {
            font-size: 28px; /* Reduced from 36px for better containment */
            color: #FFFFFF; /* White text */
            text-align: center;
            font-weight: 600; /* Semi-bold for better prominence */
            line-height: 1.2; /* Tighter line height */
            margin-bottom: 30px; /* Reduced margin */
        }

        /* LCM Table Layout with Horizontal Lines */
        .lcm-container {
            display: flex;
            flex-direction: column;
            margin: 20px 0;
            position: relative;
        }

        .lcm-row {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 8px 0 0 0;
            position: relative;
            min-height: 40px;
        }

        .lcm-row:not(:last-child)::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #FFFFFF; /* Horizontal line between rows */
        }

        .prime-factors {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px; /* Fixed width for prime factor column */
        }

        .vertical-divider {
            width: 4px;
            height: 100%;
            background-color: #FFFFFF; /* Thick white vertical line */
            flex-shrink: 0;
            align-self: stretch;
        }

        .number-pairs {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
        }

        .comma {
            font-size: 28px; /* Reduced from 36px */
            color: #FFFFFF;
            font-weight: bold;
            margin: 0 6px; /* Reduced margin */
        }

        /* Final row styling - no prime factor */
        .lcm-row.final-row .prime-factors {
            width: 60px; /* Same width but empty */
        }

        /* LCM Calculation Text */
        .lcm-calculation {
            font-size: 32px; /* Reduced from 42px */
            color: #FFFFFF; /* White text */
            text-align: center;
            font-weight: 600;
            margin-top: 25px; /* Reduced margin */
            line-height: 1.2; /* Tighter line height */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px; /* Reduced gap */
            flex-wrap: wrap;
        }

        .lcm-calculation .calculation-element {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 48px; /* Reduced from 60px */
            height: 48px; /* Reduced from 60px */
            border-radius: 10px; /* Adjusted for smaller size */
            font-size: 22px; /* Reduced from 27px */
            font-weight: bold;
            color: #FFFFFF;
        }

        .lcm-calculation .calculation-element.circle-green {
            background-color: #219150; /* Green for 6 */
            border-radius: 50%; /* Circle shape for 6 */
        }

        .lcm-calculation .calculation-element.circle-orange {
            background-color: #FF7F3F; /* Orange for 4 */
            border-radius: 50%; /* Circle shape for 4 */
        }

        .lcm-calculation .calculation-element.square-blue {
            background-color: #3498DB; /* Blue for prime factors and result */
            border-radius: 8px; /* Square shape for prime factors */
        }

        .lcm-calculation .text-white {
            color: #FFFFFF;
            font-size: 28px;
            font-weight: 600;
        }

        /* Number circles and squares */
        .number-circle, .number-square {
            width: 32px; /* Reduced from 40px */
            height: 32px; /* Reduced from 40px */
            border-radius: 50%; /* Circles for numbers */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 16px; /* Reduced from 18px */
            font-weight: bold;
            color: #FFFFFF;
            margin: 0 4px; /* Reduced margin */
        }

        .number-square {
            border-radius: 8px; /* Squares for prime factors */
        }

        .number-green {
            background-color: #219150; /* Green for 6-related numbers */
        }

        .number-orange {
            background-color: #FF7F3F; /* Orange for 4-related numbers */
        }

        .number-blue {
            background-color: #3498DB; /* Blue for prime factors */
        }


        /* Animation classes */
        .appear-animation {
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .appear-animation.visible {
            opacity: 1;
        }

        /* Bottom instruction bar */
        .bottom-bar {
            height: 15%;
            background-color: rgba(44, 44, 44, 0.9); /* Glass effect with 90% opacity */
            border: 3px solid #FFD700; /* Frame-like golden border */
            border-radius: 12px; /* Rounded corners */
            box-shadow: 
                0 0 0 1px rgba(255, 215, 0, 0.3), /* Inner glow */
                0 4px 12px rgba(255, 215, 0, 0.2), /* Outer shadow */
                inset 0 1px 0 rgba(255, 255, 255, 0.1); /* Inner highlight */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
            backdrop-filter: blur(10px); /* Glass blur effect */
        }

        .bottom-instruction-text {
            font-size: clamp(16px, 2.5vw, 20px);
            color: #FFFFFF; /* White text */
            text-align: center;
            font-weight: 600;
            line-height: 1.3;
            max-width: 90%;
        }

        /* Smooth transitions */
        .scene-transition {
            transition: all 0.3s ease-in-out;
        }

        /* Hand pointer for nudging user to click Step 2 */
        .hand-pointer {
            position: absolute;
            width: 40px;
            height: 40px;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            animation: nudge 1.5s infinite;
            z-index: 10;
            pointer-events: none;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
        }

        @keyframes nudge {
            0% { transform: translate(0, 0); }
            25% { transform: translate(5px, -5px); }
            50% { transform: translate(0, 0); }
            75% { transform: translate(-5px, 5px); }
            100% { transform: translate(0, 0); }
        }

        /* Responsive adjustments for different screen sizes */
        
        /* Large screens (2560px and above) - 4K optimization */
        @media (min-width: 2560px) {
            .step-button {
                height: 120px;
                font-size: 36px;
                margin-bottom: 30px;
            }
            
            .fraction-numerator,
            .fraction-denominator {
                font-size: 72px;
            }
            
            .fraction-comma {
                font-size: 48px;
            }
            
            .instruction-text {
                font-size: 40px;
            }
            
            .lcm-calculation {
                font-size: 30px;
                gap: 30px;
            }
            
            .lcm-calculation .calculation-element {
                width: 90px;
                height: 90px;
                font-size: 30px;
            }
            
            .app-container {
                padding: 15px;
                gap: 15px;
            }
            
            .step-sidebar,
            .main-content {
                padding: 45px;
            }
        }
        
        /* Medium-large screens (1920px to 2559px) - Full HD optimization */
        @media (min-width: 1920px) and (max-width: 2559px) {
            .step-button {
                height: 105px;
                font-size: 30px;
            }
            
            .fraction-numerator,
            .fraction-denominator {
                font-size: 60px;
            }
            
            .instruction-text {
                font-size: 33px;
            }
            
            .lcm-calculation {
                font-size: 27px;
            }
        }
        
        /* Standard desktop (1280px to 1919px) - HD optimization */
        @media (min-width: 1280px) and (max-width: 1919px) {
            .step-button {
                height: 90px;
                font-size: 27px;
            }
            
            .fraction-numerator,
            .fraction-denominator {
                font-size: 54px;
            }
            
            .instruction-text {
                font-size: 30px;
            }
            
            .lcm-calculation {
                font-size: 24px;
            }
        }
        
        /* Small desktop/tablet (961px to 1279px) */
        @media (min-width: 961px) and (max-width: 1279px) {
            .step-button {
                height: 75px;
                font-size: 24px;
            }
            
            .fraction-numerator,
            .fraction-denominator {
                font-size: 48px;
            }
            
            .instruction-text {
                font-size: 27px;
            }
            
            .lcm-calculation {
                font-size: 21px;
            }
            
            .app-container {
                padding: 8px;
                gap: 8px;
            }
        }
        
        /* Mobile and small screens (960px and below) */
        @media (max-width: 960px) {
            .app-container {
                padding: 4px; /* Reduced padding for smaller screens */
            }
            
            .top-section {
                /* Keep horizontal layout - sidebar stays on left */
                flex-direction: row;
                height: 85%;
                gap: 4px; /* Reduced gap for smaller screens */
            }
            
            .step-sidebar {
                width: 30%; /* Consistent 30% width on mobile */
                height: auto;
                flex-direction: column; /* Keep vertical button layout */
                justify-content: flex-start;
                padding: 10px;
                border-right: 3px solid #FFD700;
                border-bottom: none;
                border-radius: 12px; /* All corners rounded */
            }
            
            .step-button {
                width: calc(100% - 20px); /* Responsive width within 30% sidebar */
                height: calc((100vw - 20px) * 0.551 * 0.3); /* Proportional height maintaining aspect ratio */
                max-height: 100px; /* Mobile-optimized max height */
                min-height: 60px; /* Minimum usable height */
                margin: 8px 0; /* Vertical margin for stacked layout */
                font-size: clamp(18px, 4vw, 24px); /* Responsive font for mobile */
                padding-right: 10%; /* Adjusted padding for mobile */
            }
            
            .fraction-display {
                gap: 25px;
            }
            
            .fraction-numerator,
            .fraction-denominator,
            .fraction-comma {
                font-size: 36px;
            }
            
            .fraction-line {
                width: 60px;
                height: 5px;
            }

            .instruction-text {
                font-size: 27px;
            }

            .lcm-container {
                margin: 15px 0;
            }

            .lcm-row {
                gap: 15px;
                padding: 5px 0 0 0;
                min-height: 30px;
            }

            .prime-factors {
                width: 50px;
            }

            .vertical-divider {
                width: 3px;
                height: 100%;
                align-self: stretch;
            }

            .comma {
                font-size: 27px;
            }

            .number-circle, .number-square {
                width: 30px;
                height: 30px;
                font-size: 14px;
            }

            .lcm-calculation {
                font-size: 30px;
                margin-top: 20px;
                gap: 6px;
            }

            .lcm-calculation .calculation-element {
                width: 45px;
                height: 45px;
                font-size: 21px;
            }

            .lcm-calculation .text-white {
                font-size: 30px;
            }
            
            /* Bottom bar overflow prevention */
            .bottom-bar {
                height: 15%;
                min-height: 60px; /* Ensure minimum height */
                padding: 8px 12px; /* Reduced padding */
                overflow: hidden; /* Prevent content overflow */
            }
            
            .instruction-text {
                font-size: clamp(16px, 3vw, 22px); /* Smaller responsive font */
                line-height: 1.2; /* Tighter line spacing */
                max-width: 100%; /* Full width utilization */
                word-wrap: break-word; /* Break long words */
                overflow-wrap: break-word; /* Modern word breaking */
                hyphens: auto; /* Enable hyphenation */
                text-overflow: ellipsis; /* Handle text overflow gracefully */
                display: -webkit-box;
                -webkit-line-clamp: 2; /* Limit to 2 lines */
                -webkit-box-orient: vertical;
                overflow: hidden;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Removed external CDN scripts to ensure full offline functionality -->

    <!-- Translation data embedded for offline functionality -->
    <script>
        // Translation data for Convert Unlike to Like Fractions applet
        const appData = {
            en: {
                "standard-ui": {
                    buttons: {
                        next: "Next",
                        back: "Back", 
                        continue: "Continue",
                        start: "Start"
                    },
                    labels: {
                        step: "Step"
                    },
                    navigation: {
                        step_1: "Step 1",
                        step_2: "Step 2",
                        step_3: "Step 3"
                    }
                },
                "content-ui": {
                    instructions: {
                        main_instruction: "Tap anywhere to continue through the LCM calculation.",
                        find_lcm: "Find the LCM of two denominators.",
                        convert_first: "Find the equivalent fraction of the first fraction using the LCM as the denominator.",
                        convert_second: "Find the equivalent fraction of the second fraction using the LCM as the denominator."
                    },
                    math_content: {
                        lcm_calculation: "LCM of 6 and 4 = 2 × 3 × 2 = 12",
                        unlike_fractions: "Unlike Fractions",
                        like_fractions: "Like Fractions",
                        example_fractions: "2/6, 3/4"
                    },
                    feedback: {
                        step_complete: "Step completed!",
                        tap_to_continue: "Tap to continue",
                        step_locked: "Complete previous step first"
                    }
                }
            }
        };
    </script>

    <script>
        // File purpose: Offline, framework-free rendering for Step 1 (LCM) with progressive interaction

        // Audio feedback function
        const playInteractionSound = () => {
            try {
                const audio = new Audio('./assets/audio/click.mp3');
                audio.volume = 0.5; // Set volume to 50% to avoid being too loud
                audio.play().catch(error => {
                    console.log('Audio playback failed:', error);
                });
            } catch (error) {
                console.log('Audio initialization failed:', error);
            }
        };

        let currentScreen = 1;
        const translations = appData.en;

        const handleScreenTap = () => {
            playInteractionSound();
            if (currentScreen < 7) {
                currentScreen += 1;
                renderApp();
            }
        };

        const handleStepClick = (stepNumber) => {
            if (stepNumber === 2 && currentScreen >= 7) {
                window.location.href = 'step2.html';
            }
        };

        const renderApp = () => {
            const root = document.getElementById('root');

            const screen2 = currentScreen >= 2 && currentScreen < 3 ? `
                <div class="appear-animation visible">
                    <div class="number-pairs" style="justify-content: center; margin-top: 20px;">
                        <div class="number-circle number-green">6</div>
                        <span class="comma">,</span>
                        <div class="number-circle number-orange">4</div>
                    </div>
                </div>` : '';

            const rows = `
                <div class="lcm-container">
                    <div class="lcm-row">
                        <div class="prime-factors">${currentScreen >= 3 ? '<div class="number-square number-blue">2</div>' : ''}</div>
                        <div class="vertical-divider"></div>
                        <div class="number-pairs">
                            <div class="number-circle number-green">6</div>
                            <span class="comma">,</span>
                            <div class="number-circle number-orange">4</div>
                        </div>
                    </div>
                    ${currentScreen >= 4 ? `
                        <div class="lcm-row appear-animation visible">
                            <div class="prime-factors"><div class="number-square number-blue">3</div></div>
                            <div class="vertical-divider"></div>
                            <div class="number-pairs">
                                <div class="number-circle number-green">3</div>
                                <span class="comma">,</span>
                                <div class="number-circle number-orange">2</div>
                            </div>
                        </div>` : ''}
                    ${currentScreen >= 5 ? `
                        <div class="lcm-row appear-animation visible">
                            <div class="prime-factors"><div class="number-square number-blue">2</div></div>
                            <div class="vertical-divider"></div>
                            <div class="number-pairs">
                                <div class="number-circle number-green">1</div>
                                <span class="comma">,</span>
                                <div class="number-circle number-orange">2</div>
                            </div>
                        </div>` : ''}
                    ${currentScreen >= 6 ? `
                        <div class="lcm-row final-row appear-animation visible">
                            <div class="prime-factors"></div>
                            <div class="vertical-divider"></div>
                            <div class="number-pairs">
                                <div class="number-circle number-green">1</div>
                                <span class="comma">,</span>
                                <div class="number-circle number-orange">1</div>
                            </div>
                        </div>` : ''}
                </div>`;

            const lcmCalc = currentScreen >= 7 ? `
                <div class="lcm-calculation appear-animation visible">
                    <span class="text-white">LCM of</span>
                    <div class="calculation-element circle-green">6</div>
                    <span class="text-white">and</span>
                    <div class="calculation-element circle-orange">4</div>
                    <span class="text-white">=</span>
                    <div class="calculation-element square-blue">2</div>
                    <span class="text-white">×</span>
                    <div class="calculation-element square-blue">3</div>
                    <span class="text-white">×</span>
                    <div class="calculation-element square-blue">2</div>
                    <span class="text-white">=</span>
                    <div class="calculation-element square-blue">12</div>
                </div>` : '';

            root.innerHTML = `
                <div class="app-container">
                    <div class="top-section">
                        <div class="step-sidebar">
                            <button class="step-button step-1" onclick="void(0)"><span>${translations['standard-ui'].navigation.step_1}</span></button>
                            <button class="step-button step-2 ${currentScreen >= 7 ? 'enabled' : ''}" onclick="handleStepClick(2)">
                                <span>${translations['standard-ui'].navigation.step_2}</span>
                                ${currentScreen >= 7 ? `<img src="./assets/images/hand-pointer.png" alt="Click here" class="hand-pointer" />` : ''}
                            </button>
                            <button class="step-button step-3" onclick="handleStepClick(3)"><span>${translations['standard-ui'].navigation.step_3}</span></button>
                        </div>
                        <div class="main-content" onclick="handleScreenTap()">
                            <div class="content-wrapper">
                                <div class="fraction-display">
                                    <div class="fraction fraction-6">
                                        <span class="fraction-numerator">2</span>
                                        <span class="fraction-line"></span>
                                        <span class="fraction-denominator">6</span>
                                    </div>
                                    <span class="fraction-comma">,</span>
                                    <div class="fraction fraction-4">
                                        <span class="fraction-numerator">3</span>
                                        <span class="fraction-line"></span>
                                        <span class="fraction-denominator">4</span>
                                    </div>
                                </div>
                                <div class="instruction-text">${translations['content-ui'].instructions.find_lcm}</div>
                                ${screen2}
                                ${currentScreen >= 3 ? rows : ''}
                                ${lcmCalc}
                            </div>
                        </div>
                    </div>
                    <div class="bottom-bar">
                        <div class="bottom-instruction-text">Tap each step to learn how to convert unlike fractions to like fractions.</div>
                    </div>
                </div>
            `;
        };

        document.addEventListener('DOMContentLoaded', renderApp);
    </script>
</body>
</html>
